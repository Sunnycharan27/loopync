<analysis>**original_problem_statement**: The user wants to build a student-centric professional development platform called Loopync. The initial vision included phases for student profiles, collaboration tools, and a career/startup ecosystem. The project has since evolved into a full-featured social media platform with a strong focus on community Tribes that have category-specific features and an Instagram-like experience for stories and posts, including a rich music selection feature.

Recent user requests have focused on fixing numerous bugs, improving usability, and resolving critical deployment blockers. The latest requests address website crashes, poor performance on slow networks, and a need to clean up the increasingly bloated codebase.

**User's preferred language**: English

**what currently exists?**
The application is a full-stack social media platform (React/FastAPI/MongoDB) with a wide range of features, including user authentication, profiles, a main content feed (posts/reels/stories), community Tribes, a messaging system, and an admin dashboard.

In this session, the agent has successfully:
- Verified and fixed pre-deployment issues related to the Reel viewer and Admin Dashboard.
- Implemented a robust access control system for Tribes, ensuring only members can view or add content like projects and resources.
- Created a dedicated  page and added an Edit Project feature to fix an issue where project links () were not being saved or displayed.
- Fixed a critical bug in the admin verification flow that prevented request reviews.
- Added a multi-step tutorial for new users.
- Resolved several deployment-blocking errors, including a  dependency conflict, a missing  endpoint for Kubernetes, and MongoDB connection timeouts for Atlas compatibility.

**Last working item**:
-   **Last item agent was working**: Addressing a multi-part user request regarding posts getting deleted, website crashes/performance on slow networks, and removing unnecessary code. The agent investigated the deleted posts claim and found no evidence of an auto-deletion bug. It then began investigating the performance issues by analyzing the massive  file (11,700+ lines, 390 endpoints) and the main feed component ().
-   **Status**: IN PROGRESS
-   **Agent Testing Done**: N
-   **Which testing method agent to use?**: Both. The frontend testing agent should be used to verify performance improvements (e.g., loading states, image loading times). The backend testing agent should be used to run regression tests after the planned code cleanup/refactoring.
-   **User Testing Done**: N

**All Pending/In progress Issue list**:
-   **Issue 1: (P0) Website Crashing and Poor Performance on Slow Networks**
    -   **Description**: The user reports that the site is sometimes completely unresponsive (getting null) and loads poorly on 3G/4G networks. This is the most critical user-facing issue.
    -   **Attempted fixes**: The agent identified the monolithic backend and lack of frontend optimizations as likely causes but has not implemented a fix yet.
    -   **Next debug checklist**:
        1.  Integrate the existing  component application-wide (, , , etc.) to enable lazy loading of images.
        2.  Add loading states (e.g., skeleton screens) to data-heavy components like the main feed () and Tribe pages.
        3.  Review large API calls and ensure pagination is used everywhere possible.
    -   **Why fix this issue and what will be achieved with the fix?**: This is critical for user experience and retention, making the app usable on mobile networks.
    -   **Status**: IN PROGRESS
    -   **Is recurring issue?**: Y
    -   **Should Test frontend/backend/both after fix?**: Both
    -   **Blocked on other issue**: None
-   **Issue 2: (P1) Posts Disappearing (User-Perceived)**
    -   **Description**: The user believes posts are being automatically deleted.
    -   **Attempted fixes**: The agent investigated the backend code (, post models, database indexes) and found no TTL, expiration, or scheduled cleanup logic that would cause this.
    -   **Next debug checklist**:
        1.  Communicate the findings to the user, explaining that no auto-deletion mechanism exists.
        2.  Suggest monitoring the post count to confirm if the issue persists.
        3.  If the user insists, offer to add logging to the manual  endpoint to track who deletes posts and when.
    -   **Why fix this issue and what will be achieved with the fix?**: To address the user's concern and build confidence in the platform's stability.
    -   **Status**: IN PROGRESS
    -   **Is recurring issue?**: N
    -   **Should Test frontend/backend/both after fix?**: Backend
    -   **Blocked on other issue**: None

**In progress Task List**:
-   None.

**Upcoming and Future Tasks**
-   **Upcoming Tasks**:
    -   **(P0) Urgent Refactoring of **: The user requested the removal of unnecessary code. The  file is over 11,700 lines and is a major stability risk. This is the highest priority technical debt. It must be broken down into a routed structure (e.g., , ).
    -   **(P1) End-to-End Testing of Internship/Company Discovery workflow**: A long-standing user request that has not been addressed.
    -   **(P2) VibeRooms (Agora.io) end-to-end testing**: The live audio chat room feature is integrated but remains untested.
-   **Future Tasks**:
    -   **Startup Showcase & Reputation System**: Functionality to be re-introduced later.
    -   **Enhanced messaging (share posts)**: Integrate the existing .

**Completed work in this session**
-   **Deployment Blockers Resolved**: Fixed critical issues preventing production deployment, including a  dependency error, a missing  endpoint, MongoDB Atlas connection timeouts, and a malformed  file.
-   **Tribe Access Control & Project Features**: Implemented robust access control for Tribe content (Projects, Resources). Created a  page and added an Edit Project feature to allow users to fix missing  data on old projects.
-   **Link Visibility Fixes**: Ensured that project and resource links (, , ) are now consistently displayed on their respective cards.
-   **Admin Verification Bug Fix**: Resolved a  error in the backend that was blocking admins from approving or rejecting verification requests.
-   **New User Tutorial**: Created and integrated an 8-step onboarding tutorial that appears for new users.
-   **Pre-Deployment Fixes Verified**: Confirmed that the Reel viewer mute button, admin dashboard data, and Tribe resource download buttons were implemented as requested.

**Earlier issues found/mentioned but not fixed**
-   The  component was created for lazy loading but has **still not been implemented** anywhere in the application. This is a major missed opportunity for performance improvement and is directly related to the current high-priority issue.

**Known issue recurrence from previous fork**
-   None.

**Code Architecture**


**Key Technical Concepts**
-   **Deployment Readiness**: Addressed production-specific issues like health checks (), database connection tuning for Atlas, and dependency management ().
-   **Conditional Rendering**: Used extensively in  to enforce member-only access to content.
-   **Defensive Programming**: Fixed a  error in  by adding a check for a non-existent user before trying to access its properties.
-   **Data Inconsistency**: Resolved a mismatch between frontend () and backend () field names for projects and implemented a user-facing solution (Edit Project) to fix historical data.

**key DB schema**
-   ****: The backend models (, , ) in  were updated to include , resolving the data loss issue for new projects.

**changes in tech stack**
-   ****: Version pinned to  in  to resolve a deployment error related to .

**All files of reference**
-   **Performance/Refactoring Candidates**: , , 
-   **Recent Feature Fixes**: , , , 
-   **New Features**: 
-   **Deployment Fixes**: , , 

**Areas that need refactoring**:
-   ** (CRITICAL)**: At over 11,700 lines, this file is a major liability. The top priority for the next session must be to start breaking it into a router-based structure (e.g., , ).

**key api endpoints**
-    (New)
-    (New)
-    (Fixed)

**Critical Info for New Agent**
1.  **Address Performance Immediately**: The user's top complaint is website crashes and slowness. Your first action should be to implement the existing  component across the application to lazy-load images. This is a quick win that directly addresses the problem.
2.  **Begin  Refactoring**: Do not add any new features until you have a plan to tackle the monolithic . Propose a plan to the user to break it into smaller, manageable routers. This is essential for the project's long-term health.
3.  **Communicate Deleted Posts Findings**: Inform the user that your investigation found no evidence of an auto-deletion bug. Reassure them that posts are permanent unless manually deleted.
4.  **Use the Edit Project Feature**: Remember that the Edit Project modal was added so the user can manually fix their old projects that are missing a . Do not attempt to write a data migration script unless explicitly asked.

**documents and test reports created in this job**
-    was updated periodically.

**Last 10 User Messages and any pending HUMAN messages**
-   : **IN PROGRESS**. This is the current highest-priority task.
-   : **COMPLETED**. Agent identified and fixed multiple deployment blockers (, health endpoint, DB timeout, ).
-   : **COMPLETED**. Agent restarted services and restored functionality.
-   : **COMPLETED**. Agent verified all Tribe functionalities (create, delete, view, access control).
-   : **COMPLETED**. Agent fixed Project and Resource cards to ensure all uploaded links are visible.
-   : **COMPLETED**. Agent identified the backend model was missing the  field, fixed it, and added an Edit Project feature for the user to update old data.
-   : **COMPLETED**. Agent fixed the Project Detail page to always show a Project Links section with clickable buttons.
-   : **COMPLETED**. Agent created and integrated a multi-step new user tutorial.
-    (image of failing verification): **COMPLETED**. Agent fixed a  error in the backend verification service.
-   : **COMPLETED**. Agent created the  page and added a View Details button to project cards.

**Project Health Check:**
-   **Broken**: The user is experiencing crashes and poor performance on slow networks. This is the top priority.
-   **Mocked**:  runs in MOCK mode.

**3rd Party Integrations**
-   **Deezer API**: Used for music search (30s previews).
-   **Agora.io**: Integrated for VibeRooms (untested).
-   **Redis**: Used for backend caching.
-   , , , .

**Testing status**
-   **Testing agent used after significant changes**: YES
-   **Troubleshoot agent used after agent stuck in loop**: NO
-   **Test files created**: None.
-   **Known regressions**: None in this session.

**Credentials to test flow:**
-   **User**:  / 
-   **Admin**:  / 

**What agent forgot to execute**
-   The agent has repeatedly failed to integrate the  component, which was specifically created to address performance issues. This is a critical oversight and must be prioritized in the next session to resolve the user's complaints about slow loading times.</analysis>
